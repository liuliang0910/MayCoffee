# 短信通知功能设置指南

这个网站现在支持在有客户留言或回复时，通过短信通知你。

## 前置条件

你需要有一个**阿里云账户**。如果没有，请先注册：https://www.aliyun.com/

## 设置步骤

### 第1步：开通阿里云短信服务

1. 登录阿里云控制台：https://console.aliyun.com/
2. 搜索"短信服务"，点击进入
3. 点击"开通短信服务"（如果还没开通的话）

### 第2步：创建短信签名

1. 在短信服务控制台，点击左侧"国内短信"
2. 点击"短信签名"标签
3. 点击"创建签名"
4. 填写信息：
   - **签名名称**：你的公司名或网站名（例如：MayCoffee）
   - **签名来源**：选择"企业"或"个人"
   - 上传营业执照或身份证等证明文件
5. 提交后等待审核（通常1-2小时）
6. 审核通过后，记下你的**签名名称**

### 第3步：创建短信模板

1. 在短信服务控制台，点击"短信模板"标签
2. 点击"创建模板"
3. 填写信息：
   - **模板名称**：例如 "客户留言通知"
   - **短信类型**：选择"营销"
   - **模板内容**：复制以下内容：
   ```
   您有${type}，来自${name}，内容：${content}
   ```
4. 提交后等待审核（通常1-2小时）
5. 审核通过后，记下你的**模板ID**（格式如：SMS_123456789）

### 第4步：获取阿里云 API 密钥

1. 点击右上角你的账户头像
2. 选择"AccessKey 管理"
3. 点击"创建 AccessKey"
4. 系统会生成两个密钥：
   - **AccessKeyId**
   - **AccessKeySecret**
5. 保存这两个密钥（特别是 AccessKeySecret，只会显示一次）

### 第5步：配置你的网站

打开 `app.py` 文件，找到这一段（大约在第20-27行）：

```python
SMS_CONFIG = {
    'access_key_id': 'YOUR_ACCESS_KEY_ID',  # 替换为你的阿里云 AccessKeyId
    'access_key_secret': 'YOUR_ACCESS_KEY_SECRET',  # 替换为你的阿里云 AccessKeySecret
    'region_id': 'cn-hangzhou',  # 阿里云地区
    'sign_name': '你的短信签名',  # 替换为你的短信签名（需要在阿里云备案）
    'template_id': 'SMS_XXXXXX',  # 替换为你的短信模板 ID
    'phone_number': 'YOUR_PHONE_NUMBER'  # 替换为你要接收通知的手机号
}
```

替换为你的实际信息：

- `access_key_id`：你的 AccessKeyId
- `access_key_secret`：你的 AccessKeySecret
- `sign_name`：你的短信签名名称（例如：MayCoffee）
- `template_id`：你的短信模板 ID（例如：SMS_123456789）
- `phone_number`：你的手机号（例如：13800138000）

### 第6步：安装依赖

在你的项目文件夹中运行：

```bash
pip install -r requirements.txt
```

## 完成！

现在当有客户留言或回复时，你会收到短信通知。

## 常见问题

### Q: 短信费用是多少？
A: 阿里云短信按条计费，通常每条0.05-0.1元。你可以在阿里云控制台查看详细的价格。

### Q: 为什么收不到短信？
A: 
1. 检查你的短信签名和模板是否已审核通过
2. 检查你的 AccessKey 是否正确
3. 检查你的手机号是否正确
4. 检查阿里云账户是否有余额

### Q: 可以改成其他短信服务吗？
A: 可以的，你也可以使用腾讯云、华为云等其他服务。代码结构是一样的，只需要改一下 API 调用部分。

### Q: 如何测试短信功能？
A: 
1. 确保配置正确
2. 在网站上提交一条留言
3. 检查你的手机是否收到短信
4. 如果没收到，检查 Python 控制台的错误信息

## 需要帮助？

如果有问题，请查看 Python 控制台的输出。成功发送短信时会显示 "✅ 短信已发送"，失败时会显示 "❌ 短信发送失败" 和错误信息。
